{"version":3,"sources":["App.module.css","components/Result/Result.module.css","components/Map/Map.module.css","components/Search/Search.module.css","components/Examples/Examples.module.css","components/Search/LogoSvg.js","components/Map/Map.js","components/Result/Result.js","components/Search/Search.js","components/Examples/Examples.js","api-helper.js","App.js","index.js"],"names":["module","exports","LogoSvg","xmlns","version","id","viewBox","width","className","classes","st0","d","Map","props","useState","height","viewport","setViewport","useEffect","prevState","latitude","location","longitude","zoom","memoizedMarker","useCallback","marker","ip","mapStyle","mapboxApiAccessToken","onViewportChange","nextViewport","Result","resultsSections","result","data","isDataOfClient","city","country","flag","alt","src","img","ready","Search","React","forwardRef","ref","search","type","placeholder","htmlFor","onClick","Examples","examples","state","map","example","fetchExample","bind","unsplash","createApi","accessKey","getIpData","a","error","toString","length","Error","fetch","rawIpData","json","ipData","country_name","getImg","countryImg","console","log","country_flag","getPhotos","query","imgData","response","results","urls","small","getClientIp","rawUserIp","text","userIp","ipRegex","match","initialUserData","App","userData","setUserData","setError","inputRef","useRef","fetchIPdata","cleanSearchBar","current","value","chooseUserIp","app","title","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d8e566d1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"narrow\":\"App_narrow__SiuTA\",\"title\":\"App_title__Zi-KC\",\"st0\":\"App_st0__1aPOG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"result\":\"Result_result__NtMLz\",\"flag\":\"Result_flag__3qdat\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"marker\":\"Map_marker__3TXMr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search\":\"Search_search__DeuRc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"examples\":\"Examples_examples__1-80J\"};","import React from 'react';\r\nimport classes from '../../App.module.css';\r\nconst LogoSvg = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      version=\"1.1\"\r\n      id=\"Layer_1\"\r\n      viewBox=\"-30 20 107 122.88\"\r\n      width=\"7%\"\r\n    >\r\n      <g>\r\n        <path\r\n          className={classes.st0}\r\n          d=\"M90.73,63.42c-3.11,15.04-10.8,30.33-22.18,42.8l-0.03,0.05c-5.6,6.12-12.09,11.61-19.42,16.06 c-0.88,0.66-2.13,0.75-3.13,0.11c-10.8-6.87-19.85-15.13-26.99-24.09C9.15,86.02,2.94,72.34,0.83,59.16 c-2.15-13.36-0.14-26.2,6.51-36.68c2.63-4.13,5.97-7.89,10.07-11.14C26.78,3.88,37.51-0.07,48.17,0 c10.28,0.09,20.42,3.9,29.22,11.93c3.09,2.81,5.67,5.99,7.78,9.48C92.32,33.18,93.86,48.22,90.73,63.42L90.73,63.42z M29.21,31.63 h8.91v28.73h-8.91V31.63L29.21,31.63z M42.98,31.63h14.77c3.22,0,5.63,0.76,7.23,2.29c1.6,1.53,2.4,3.71,2.4,6.54 c0,2.9-0.88,5.18-2.62,6.81c-1.75,1.64-4.41,2.45-8,2.45h-4.87v10.63h-8.91V31.63L42.98,31.63z M51.89,43.91h2.19 c1.73,0,2.94-0.3,3.63-0.9c0.7-0.6,1.04-1.36,1.04-2.29c0-0.9-0.3-1.66-0.91-2.29c-0.6-0.63-1.74-0.94-3.41-0.94h-2.54V43.91 L51.89,43.91z M46.13,13.25c9.23,0,17.62,3.75,23.65,9.81c6.06,6.06,9.81,14.41,9.81,23.65c0,9.23-3.75,17.62-9.81,23.65 c-6.06,6.06-14.41,9.81-23.65,9.81c-9.23,0-17.62-3.75-23.65-9.81c-6.06-6.06-9.81-14.41-9.81-23.65c0-9.23,3.75-17.61,9.81-23.65 C28.55,17,36.89,13.25,46.13,13.25L46.13,13.25L46.13,13.25z\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default LogoSvg;\r\n","import * as React from 'react';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport ReactMapGL, { Marker } from 'react-map-gl';\r\nimport classes from './Map.module.css';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\n\r\nfunction Map(props) {\r\n  const [viewport, setViewport] = useState({\r\n    width: '100%',\r\n    height: 450,\r\n  });\r\n  useEffect(() => {\r\n    setViewport((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        latitude: props.location.latitude,\r\n        longitude: props.location.longitude,\r\n        zoom: 9,\r\n      };\r\n    });\r\n  }, [props.location]);\r\n\r\n  const memoizedMarker = useCallback(() => {\r\n    return (\r\n      <Marker\r\n        longitude={props.location.longitude}\r\n        latitude={props.location.latitude}\r\n      >\r\n        <div className={classes.marker}></div> <b>{props.ip}</b>\r\n      </Marker>\r\n    );\r\n  }, [props.location, props.ip]);\r\n\r\n  return (\r\n    <ReactMapGL\r\n      mapStyle=\"mapbox://styles/mapbox/outdoors-v9\"\r\n      mapboxApiAccessToken=\"pk.eyJ1IjoiemFidGFuaSIsImEiOiJja3NicXZjaW4wOTR3MnZxcTFkbWc0OWsxIn0.FMBuaDyD8jhKrhAVAzrJyQ\"\r\n      {...viewport}\r\n      onViewportChange={(nextViewport) => setViewport(nextViewport)}\r\n    >\r\n      {memoizedMarker()}\r\n    </ReactMapGL>\r\n  );\r\n}\r\n\r\nexport default Map;\r\n","import React from 'react';\nimport Map from '../Map/Map';\nimport classes from './Result.module.css';\n\nconst Result = (props) => {\n  return (\n    <div className={classes.resultsSections}>\n      <section>\n        <div className={classes.result}>\n          <h2>\n            Results for\n            {props.data.isDataOfClient ? ' Your' : ' Searched'} IP:{' '}\n            {props.data.ip}\n          </h2>\n          <h3>\n            {props.data.city} - {props.data.country}\n          </h3>\n          <img\n            className={classes.flag}\n            alt={props.data.country}\n            src={props.data.flag}\n          />\n          <img alt={props.data.country} src={props.data.img} />\n        </div>\n      </section>\n\n      <section>\n        {props.data.ready && (\n          <Map\n            ip={props.data.ip}\n            location={{\n              latitude: props.data.location.latitude,\n              longitude: props.data.location.longitude,\n            }}\n          />\n        )}\n      </section>\n    </div>\n  );\n};\n\nexport default Result;\n","import React from 'react';\r\nimport classes from './Search.module.css';\r\n\r\nconst Search = React.forwardRef((props, ref) => {\r\n  return (\r\n    <div className={classes.search}>\r\n      <input id=\"ip\" type=\"text\" placeholder=\"type IP here...\" ref={ref} />\r\n      <label htmlFor=\"ip\"> type something like: 8.209.36.0 </label>\r\n      <button type=\"button\" onClick={props.search}>\r\n        Search\r\n      </button>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Search;\r\n","import React from 'react';\r\nimport classes from './Examples.module.css';\r\nconst Examples = (props) => {\r\n  const examples = [\r\n    {\r\n      state: 'Uruguay',\r\n      ip: '200.108.241.198',\r\n    },\r\n    {\r\n      state: 'Norway',\r\n      ip: '92.42.70.36',\r\n    },\r\n    {\r\n      state: 'Italy',\r\n      ip: '2.16.135.255',\r\n    },\r\n    {\r\n      state: 'Japan',\r\n      ip: '1.21.255.255',\r\n    },\r\n    {\r\n      state: 'Germany',\r\n      ip: '2.16.23.0',\r\n    },\r\n    {\r\n      state: 'Sweden',\r\n      ip: '2.16.66.0',\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className={classes.examples}>\r\n      {examples.map((example) => (\r\n        <button\r\n          key={example.state}\r\n          type=\"button\"\r\n          onClick={props.fetchExample.bind(this, example.ip, false)}\r\n        >\r\n          {`${example.ip} (${example.state})`}\r\n        </button>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Examples;\r\n","import { createApi } from 'unsplash-js';\r\nconst unsplash = createApi({\r\n  accessKey: '0oJhi_V8eHNlNtyOLjykytXjPWxFd79JZ7FWUduq0vk',\r\n});\r\n\r\nconst defaultCountryImg =\r\n  'https://www.globe.gov/o/gov.globe.home.explorelearnearth.web/images/learn-earth-system-clean.png';\r\nexport const getIpData = async (ip) => {\r\n  let result = { error: false, data: null };\r\n  try {\r\n    if (ip.toString().length > 20) {\r\n      throw new Error('mobile');\r\n    }\r\n    const rawIpData = await fetch(\r\n      `https://api.ipgeolocation.io/ipgeo?apiKey=8d8e8d860b914ac78cda85b380926ccb&ip=${ip}`\r\n    );\r\n    const ipData = await rawIpData.json();\r\n    if (!ipData.country_name) {\r\n      throw new Error();\r\n    }\r\n    const countryImg = await getImg(ipData.country_name);\r\n    console.log(ipData);\r\n    result.data = {\r\n      flag: ipData.country_flag,\r\n      img: countryImg,\r\n      city: ipData.city,\r\n      country: ipData.country_name,\r\n      location: {\r\n        latitude: ipData.latitude * 1,\r\n        longitude: ipData.longitude * 1,\r\n      },\r\n    };\r\n  } catch (e) {\r\n    result.error =\r\n      e === 'mobile'\r\n        ? 'App support PC IP only. Enjoy!'\r\n        : 'Sorry,no results fot this IP address.';\r\n  } finally {\r\n    return result;\r\n  }\r\n};\r\n\r\nconst getImg = async (country) => {\r\n  let result;\r\n  try {\r\n    const imgData = await unsplash.search.getPhotos({\r\n      query: country,\r\n    });\r\n    result = imgData.response.results[0].urls.small;\r\n  } catch {\r\n    result = defaultCountryImg;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getClientIp = async () => {\r\n  const rawUserIp = await fetch('https://www.cloudflare.com/cdn-cgi/trace');\r\n  let userIp = await rawUserIp.text();\r\n  let ipRegex = /[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}/;\r\n  userIp = userIp.match(ipRegex)[0];\r\n  return userIp;\r\n};\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport LogoSvg from './components/Search/LogoSvg';\nimport Result from './components/Result/Result';\nimport Search from './components/Search/Search';\nimport Examples from './components/Examples/Examples';\nimport classes from './App.module.css';\nimport { getIpData, getClientIp } from './api-helper';\n\nconst initialUserData = {\n  country: null,\n  ip: null,\n  isDataOfClient: false,\n  ready: null,\n};\nfunction App() {\n  const [userData, setUserData] = useState(initialUserData);\n  const [error, setError] = useState(false);\n  const inputRef = useRef();\n\n  const fetchIPdata = useCallback(async (ip, isDataOfClient) => {\n    cleanSearchBar();\n    setError(false);\n    const ipData = await getIpData(ip);\n    if (ipData.error) {\n      setUserData(initialUserData);\n      setError(ipData.error);\n    } else {\n      setUserData((prevState) => {\n        return {\n          ...prevState,\n          ready: true,\n          ip: ip,\n          isDataOfClient: isDataOfClient,\n          ...ipData.data,\n        };\n      });\n    }\n  }, []);\n  const searchIpHandler = () => {\n    fetchIPdata(inputRef.current.value, false);\n  };\n  const cleanSearchBar = () => {\n    inputRef.current.value = '';\n  };\n  useEffect(() => {\n    const chooseUserIp = async () => {\n      const userIp = await getClientIp();\n      fetchIPdata(userIp, true);\n    };\n    chooseUserIp();\n  }, [fetchIPdata]);\n  return (\n    <div className={classes.app}>\n      <section>\n        <div className={classes.title}>\n          <h1>Check that </h1> <LogoSvg />\n        </div>\n        <Search search={searchIpHandler} ref={inputRef} />\n        <Examples fetchExample={fetchIPdata} />\n      </section>\n\n      {userData.ready ? (\n        <Result data={userData} />\n      ) : (\n        <section>{error ? error : 'Loading IP Data..'}</section>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}