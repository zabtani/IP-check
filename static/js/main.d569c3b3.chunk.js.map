{"version":3,"sources":["App.module.css","components/Result/Result.module.css","components/Examples/Examples.module.css","components/Map/Map.module.css","components/Search/Search.module.css","components/Search/LogoSvg.js","components/Map/Map.js","api-config.js","components/Result/Result.js","components/Search/Search.js","components/Examples/Examples.js","api-helper.js","App.js","index.js"],"names":["module","exports","LogoSvg","xmlns","version","id","viewBox","width","className","classes","st0","d","Map","props","useState","height","viewport","setViewport","useEffect","prevState","latitude","location","longitude","zoom","memoizedMarker","useCallback","marker","ip","scrollZoom","mapStyle","mapboxApiAccessToken","onViewportChange","nextViewport","Result","resultsSections","result","data","isIpOfClient","city","country","flag","alt","src","img","ready","Search","React","forwardRef","ref","search","type","placeholder","htmlFor","onClick","Examples","examplesAreOpen","setExamplesAreOpen","buttonText","examples","examplesButton","examplesCon","state","map","example","fetchExample","bind","unsplash","createApi","accessKey","getIpData","a","error","targetIp","Error","getClientIp","console","log","fetch","rawIpData","json","ipData","country_name","getImg","countryImg","country_flag","message","getPhotos","query","imgData","response","results","urls","small","rawUserIp","text","userIp","ipRegex","match","initialUserData","App","userData","setUserData","setError","inputRef","useRef","fetchIPdata","cleanSearchBar","current","value","app","title","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d569c3b3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"App_section__2cfNy\",\"narrow\":\"App_narrow__SiuTA\",\"title\":\"App_title__Zi-KC\",\"st0\":\"App_st0__1aPOG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"result\":\"Result_result__NtMLz\",\"flag\":\"Result_flag__3qdat\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"examples\":\"Examples_examples__1-80J\",\"examplesButton\":\"Examples_examplesButton__3kk_P\",\"examplesCon\":\"Examples_examplesCon__2Tvmu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"marker\":\"Map_marker__3TXMr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search\":\"Search_search__DeuRc\"};","import React from 'react';\r\nimport classes from '../../App.module.css';\r\nconst LogoSvg = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      version=\"1.1\"\r\n      id=\"Layer_1\"\r\n      viewBox=\"-30 20 107 122.88\"\r\n      width=\"7%\"\r\n    >\r\n      <g>\r\n        <path\r\n          className={classes.st0}\r\n          d=\"M90.73,63.42c-3.11,15.04-10.8,30.33-22.18,42.8l-0.03,0.05c-5.6,6.12-12.09,11.61-19.42,16.06 c-0.88,0.66-2.13,0.75-3.13,0.11c-10.8-6.87-19.85-15.13-26.99-24.09C9.15,86.02,2.94,72.34,0.83,59.16 c-2.15-13.36-0.14-26.2,6.51-36.68c2.63-4.13,5.97-7.89,10.07-11.14C26.78,3.88,37.51-0.07,48.17,0 c10.28,0.09,20.42,3.9,29.22,11.93c3.09,2.81,5.67,5.99,7.78,9.48C92.32,33.18,93.86,48.22,90.73,63.42L90.73,63.42z M29.21,31.63 h8.91v28.73h-8.91V31.63L29.21,31.63z M42.98,31.63h14.77c3.22,0,5.63,0.76,7.23,2.29c1.6,1.53,2.4,3.71,2.4,6.54 c0,2.9-0.88,5.18-2.62,6.81c-1.75,1.64-4.41,2.45-8,2.45h-4.87v10.63h-8.91V31.63L42.98,31.63z M51.89,43.91h2.19 c1.73,0,2.94-0.3,3.63-0.9c0.7-0.6,1.04-1.36,1.04-2.29c0-0.9-0.3-1.66-0.91-2.29c-0.6-0.63-1.74-0.94-3.41-0.94h-2.54V43.91 L51.89,43.91z M46.13,13.25c9.23,0,17.62,3.75,23.65,9.81c6.06,6.06,9.81,14.41,9.81,23.65c0,9.23-3.75,17.62-9.81,23.65 c-6.06,6.06-14.41,9.81-23.65,9.81c-9.23,0-17.62-3.75-23.65-9.81c-6.06-6.06-9.81-14.41-9.81-23.65c0-9.23,3.75-17.61,9.81-23.65 C28.55,17,36.89,13.25,46.13,13.25L46.13,13.25L46.13,13.25z\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default LogoSvg;\r\n","import * as React from 'react';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport ReactMapGL, { Marker } from 'react-map-gl';\r\nimport classes from './Map.module.css';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\nimport { MAPBOX_API_KEY } from '../../api-config';\r\nfunction Map(props) {\r\n  const [viewport, setViewport] = useState({\r\n    width: '100%',\r\n    height: 450,\r\n  });\r\n  useEffect(() => {\r\n    setViewport((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        latitude: props.location.latitude,\r\n        longitude: props.location.longitude,\r\n        zoom: 9,\r\n      };\r\n    });\r\n  }, [props.location]);\r\n\r\n  const memoizedMarker = useCallback(() => {\r\n    return (\r\n      <Marker\r\n        longitude={props.location.longitude}\r\n        latitude={props.location.latitude}\r\n      >\r\n        <div className={classes.marker}></div> <b>{props.ip}</b>\r\n      </Marker>\r\n    );\r\n  }, [props.location, props.ip]);\r\n\r\n  return (\r\n    <ReactMapGL\r\n      scrollZoom={false}\r\n      mapStyle=\"mapbox://styles/mapbox/outdoors-v9\"\r\n      mapboxApiAccessToken={MAPBOX_API_KEY}\r\n      {...viewport}\r\n      onViewportChange={(nextViewport) => setViewport(nextViewport)}\r\n    >\r\n      {memoizedMarker()}\r\n    </ReactMapGL>\r\n  );\r\n}\r\n\r\nexport default Map;\r\n","export const MAPBOX_API_KEY =\r\n  'pk.eyJ1IjoiemFidGFuaSIsImEiOiJja3NicXZjaW4wOTR3MnZxcTFkbWc0OWsxIn0.FMBuaDyD8jhKrhAVAzrJyQ';\r\nexport const UNSPLASH_API_KEY = '0oJhi_V8eHNlNtyOLjykytXjPWxFd79JZ7FWUduq0vk';\r\nexport const IPGEOLOCATION_API_KEY = '8d8e8d860b914ac78cda85b380926ccb';\r\n","import React from 'react';\nimport Map from '../Map/Map';\nimport classes from './Result.module.css';\n\nconst Result = (props) => {\n  return (\n    <div className={classes.resultsSections}>\n      <section>\n        <div className={classes.result}>\n          <h2>\n            Results for {props.data.isIpOfClient && ' Your IP '}\n            {props.data.ip}\n          </h2>\n          <h3>\n            {props.data.city} - {props.data.country}\n          </h3>\n          <img\n            className={classes.flag}\n            alt={props.data.country}\n            src={props.data.flag}\n          />\n          <img alt={props.data.country} src={props.data.img} />\n          <i>Picture of {props.data.country}</i>\n        </div>\n      </section>\n\n      <section>\n        {props.data.ready && (\n          <Map\n            ip={props.data.ip}\n            location={{\n              latitude: props.data.location.latitude,\n              longitude: props.data.location.longitude,\n            }}\n          />\n        )}\n      </section>\n    </div>\n  );\n};\n\nexport default Result;\n","import React from 'react';\r\nimport classes from './Search.module.css';\r\n\r\nconst Search = React.forwardRef((props, ref) => {\r\n  return (\r\n    <div className={classes.search}>\r\n      <input id=\"ip\" type=\"text\" placeholder=\"type IP here...\" ref={ref} />\r\n      <label htmlFor=\"ip\"> type something like: 8.209.36.0 </label>\r\n      <button type=\"button\" onClick={props.search}>\r\n        Search\r\n      </button>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Search;\r\n","import React, { useState } from 'react';\r\nimport classes from './Examples.module.css';\r\nconst Examples = (props) => {\r\n  const [examplesAreOpen, setExamplesAreOpen] = useState(false);\r\n  const examplesButtonHandler = () => {\r\n    setExamplesAreOpen((prevState) => {\r\n      return !prevState;\r\n    });\r\n  };\r\n  const examples = [\r\n    {\r\n      state: 'Your location',\r\n      ip: '',\r\n    },\r\n    {\r\n      state: 'Uruguay',\r\n      ip: '200.108.241.198',\r\n    },\r\n    {\r\n      state: 'Norway',\r\n      ip: '92.42.70.36',\r\n    },\r\n    {\r\n      state: 'Italy',\r\n      ip: '2.16.135.255',\r\n    },\r\n    {\r\n      state: 'Japan',\r\n      ip: '1.21.255.255',\r\n    },\r\n    {\r\n      state: 'Germany',\r\n      ip: '2.16.23.0',\r\n    },\r\n    {\r\n      state: 'Sweden',\r\n      ip: '2.16.66.0',\r\n    },\r\n  ];\r\n\r\n  const buttonText = examplesAreOpen\r\n    ? 'Fold IP examples'\r\n    : 'Click to see IP examples';\r\n  return (\r\n    <div className={classes.examples}>\r\n      <button\r\n        className={classes.examplesButton}\r\n        onClick={examplesButtonHandler}\r\n      >\r\n        {buttonText}\r\n      </button>\r\n      {examplesAreOpen && (\r\n        <div className={classes.examplesCon}>\r\n          {examples.map((example) => (\r\n            <button\r\n              key={example.state}\r\n              type=\"button\"\r\n              onClick={props.fetchExample.bind(\r\n                this,\r\n                example.ip,\r\n                example.ip === '' ? true : false\r\n              )}\r\n            >\r\n              {`${example.state} ${example.ip}`}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Examples;\r\n","import { createApi } from 'unsplash-js';\r\nimport { IPGEOLOCATION_API_KEY, UNSPLASH_API_KEY } from './api-config';\r\nconst unsplash = createApi({\r\n  accessKey: UNSPLASH_API_KEY,\r\n});\r\n\r\nconst defaultCountryImg =\r\n  'https://www.globe.gov/o/gov.globe.home.explorelearnearth.web/images/learn-earth-system-clean.png';\r\nexport const getIpData = async (ip, isIpOfClient) => {\r\n  let result = { error: false, data: null };\r\n  let targetIp = ip;\r\n  try {\r\n    if (ip === '') {\r\n      if (!isIpOfClient) {\r\n        throw new Error('Please provide IP for the search bar');\r\n      } else {\r\n        targetIp = await getClientIp();\r\n        console.log(targetIp);\r\n      }\r\n    }\r\n    const rawIpData = await fetch(\r\n      `https://api.ipgeolocation.io/ipgeo?apiKey=${IPGEOLOCATION_API_KEY}&ip=${ip}`\r\n    );\r\n    const ipData = await rawIpData.json();\r\n\r\n    if (!ipData.country_name) {\r\n      throw new Error('Sorry,no results for this IP address.');\r\n    }\r\n    const countryImg = await getImg(ipData.country_name);\r\n    result.data = {\r\n      ip: targetIp,\r\n      flag: ipData.country_flag,\r\n      img: countryImg,\r\n      city: ipData.city,\r\n      country: ipData.country_name,\r\n      location: {\r\n        latitude: ipData.latitude * 1,\r\n        longitude: ipData.longitude * 1,\r\n      },\r\n    };\r\n  } catch (e) {\r\n    result.error = e.message;\r\n  } finally {\r\n    return result;\r\n  }\r\n};\r\n\r\nconst getImg = async (country) => {\r\n  let result;\r\n  try {\r\n    const imgData = await unsplash.search.getPhotos({\r\n      query: country,\r\n    });\r\n    result = imgData.response.results[0].urls.small;\r\n  } catch {\r\n    result = defaultCountryImg;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getClientIp = async () => {\r\n  const rawUserIp = await fetch('https://www.cloudflare.com/cdn-cgi/trace');\r\n  let userIp = await rawUserIp.text();\r\n  let ipRegex = /[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}/;\r\n  userIp = userIp.match(ipRegex)[0];\r\n  return userIp;\r\n};\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport LogoSvg from './components/Search/LogoSvg';\nimport Result from './components/Result/Result';\nimport Search from './components/Search/Search';\nimport Examples from './components/Examples/Examples';\nimport classes from './App.module.css';\nimport { getIpData } from './api-helper';\n\nconst initialUserData = {\n  isIpOfClient: false,\n  ready: false,\n};\nfunction App() {\n  const [userData, setUserData] = useState(initialUserData);\n  const [error, setError] = useState(false);\n  const inputRef = useRef();\n\n  const fetchIPdata = useCallback(async (ip, isIpOfClient) => {\n    cleanSearchBar();\n    setUserData(initialUserData);\n    setError(false);\n    const ipData = await getIpData(ip, isIpOfClient);\n    if (ipData.error) {\n      setError(ipData.error);\n    } else {\n      setUserData({\n        ready: true,\n        isIpOfClient: isIpOfClient,\n        ...ipData.data,\n      });\n    }\n  }, []);\n  const searchIpHandler = () => {\n    fetchIPdata(inputRef.current.value, false);\n  };\n  const cleanSearchBar = () => {\n    inputRef.current.value = '';\n  };\n\n  useEffect(() => {\n    fetchIPdata('', true);\n  }, [fetchIPdata]);\n  return (\n    <div className={classes.app}>\n      <section>\n        <div className={classes.title}>\n          <h1>Check that </h1> <LogoSvg />\n        </div>\n        <Search search={searchIpHandler} ref={inputRef} />\n        <Examples fetchExample={fetchIPdata} />\n      </section>\n\n      {userData.ready ? (\n        <Result data={userData} />\n      ) : (\n        <section>\n          <p>{error ? error : 'Loading IP Data..'}</p>\n        </section>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}